{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///feb-alive.js","webpack:///webpack/bootstrap 166d148b945331fde3c8","webpack:///./src/routes.js","webpack:///./src/cache.js","webpack:///./src/utils.js","webpack:///./src/index.js","webpack:///./src/components/feb-alive.js","webpack:///./src/components/feb-alive-ssr.js","webpack:///./src/navigator.js"],"names":["root","factory","exports","module","define","amd","a","i","self","this","modules","__webpack_require__","moduleId","installedModules","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","inBrowser","window","routes","debug_routes","cache","create","debug_cache","_typeof","obj","Symbol","iterator","constructor","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","Array","isArray","genKey","replace","r","Math","random","toString","matches","pattern","indexOf","split","RegExp","test","getLocation","base","mode","path","location","pathname","hash","slice","search","remove","item","index","splice","getCacheVnode","key","isPlainObject","_toString","deepClone","val","res","defineRouteMeta","forEach","route","meta","writable","children","parsePath","query","hashIndex","queryIndex","pathStr","queryStr","hashStr","supportHistoryState","parseUrl","supportsPushState","ua","navigator","userAgent","history","replaceState","assign","_debug","state","originState","genLocation","url","_parsePath","kv","_kv$split","_kv$split2","decodeURIComponent","stringifyPrimitive","v","isFinite","stringifyQuery","str","keys","encodeURIComponent","_url","newQuery","__WEBPACK_IMPORTED_MODULE_0__components_feb_alive__","__WEBPACK_IMPORTED_MODULE_1__components_feb_alive_ssr__","__WEBPACK_IMPORTED_MODULE_2__routes__","__WEBPACK_IMPORTED_MODULE_3__cache__","__WEBPACK_IMPORTED_MODULE_4__navigator__","__WEBPACK_IMPORTED_MODULE_5__utils__","metaMap","hasReset","install","Vue","_ref","arguments","router","_ref$keyName","keyName","_ref$isServer","isServer","_ref$maxPage","maxPage","beforeLocationChange","component","FebAliveSSR","FebAlive","console","warn","debug_metaMap","options","bus","nav","lastKey","replaceFlag","apply","ensureURL","from","febRecord","to","recoverMeta","record","beforeEach","_default","$location","native","concat","origin","matchRoute","match","matched","href","log","go","back","forward","isSamePage","fromMeta","toMeta","isReplace","disableCache","fromCache","getRoutes","febRoutes","getCache","febCache","getKey","cleanRoutes","reset","on","event","callback","$on","once","$once","off","$off","resetHistory","nativeHistoryReplaceState","bind","title","_defineProperty","__WEBPACK_IMPORTED_MODULE_0__routes__","__WEBPACK_IMPORTED_MODULE_1__cache__","__WEBPACK_IMPORTED_MODULE_2__utils__","abstract","methods","cacheClear","parseInt","oldKey","oldVnode","componentInstance","$destroy","vnode","created","render","$slots","default","$route","_this$$router$febReco","$router","parent","$parent","depth","cacheVnode","data","febAlive","_routerRoot","$vnode","tag","keepAlive","destroyed","toRoute","fromRoute","Routes","$emit","count","refresh","toIndex","lastIndexOf"],"mappings":"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","file":"feb-alive.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\n * 记录浏览历史\n */\nvar inBrowser = typeof window !== 'undefined';\nvar routes = [];\n\nif (inBrowser) {\n  window.debug_routes = routes;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (routes);\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\n * 记录feb-alive中的缓存列表\n */\nvar inBrowser = typeof window !== 'undefined';\nvar cache = Object.create(null);\n\nif (inBrowser) {\n  window.debug_cache = cache;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (cache);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export supportsPushState */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"i\", function() { return supportHistoryState; });\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = genKey;\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = matches;\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = getLocation;\n/* harmony export (immutable) */ __webpack_exports__[\"h\"] = remove;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = getCacheVnode;\n/* unused harmony export isPlainObject */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = deepClone;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = defineRouteMeta;\n/* unused harmony export urlRegExp */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return parseUrl; });\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar inBrowser = typeof window !== 'undefined';\nvar _toString = Object.prototype.toString; // 判断是否支持HTML5 history\n\nvar supportsPushState = inBrowser && function () {\n  var ua = window.navigator.userAgent;\n\n  if ((ua.indexOf('Android 2.') !== -1 || ua.indexOf('Android 4.0') !== -1) && ua.indexOf('Mobile Safari') !== -1 && ua.indexOf('Chrome') === -1 && ua.indexOf('Windows Phone') === -1) {\n    return false;\n  }\n\n  return window.history && 'pushState' in window.history;\n}();\nvar supportHistoryState = function () {\n  if (!supportsPushState) {\n    return false;\n  } // 测试写操作\n\n\n  history.replaceState(Object.assign({\n    _debug: 'ok'\n  }, history.state), null);\n\n  if (!history.state) {\n    return false;\n  } else {\n    var originState = Object.assign({}, history.state);\n    delete originState._debug;\n    history.replaceState(originState, null);\n    return true;\n  }\n}();\n/**\n * 生成页面主键\n */\n\nfunction genKey() {\n  var t = 'xxxxxxxx';\n  return t.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0;\n    var v = c === 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\n/**\n * 检测路由匹配\n * @param {Array/String/RegExp} pattern 路由主键数组/字符串/正则表达式\n * @param {String} name 路由主键\n */\n\nfunction matches(pattern, name) {\n  if (Array.isArray(pattern)) {\n    return pattern.indexOf(name) > -1;\n  } else if (typeof pattern === 'string') {\n    return pattern.split(',').indexOf(name) > -1;\n  } else if (pattern instanceof RegExp) {\n    return pattern.test(name);\n  }\n\n  return false;\n}\n/**\n * 获取当前url路径\n * @param {String} base | 基础路径\n * @param {String} mode | 路由模式\n */\n\nfunction getLocation(base, mode) {\n  var path = window.location.pathname;\n\n  if (mode === 'hash') {\n    return window.location.hash.replace(/^#\\//, '');\n  }\n\n  if (base && path.indexOf(base) === 0) {\n    path = path.slice(base.length);\n  }\n\n  return (path || '/') + window.location.search + window.location.hash;\n}\n/**\n * 删除数组中匹配元素\n * @param {Array} arr 数组\n * @param {String} item 需要删除的元素\n */\n\nfunction remove(arr, item) {\n  if (arr.length) {\n    var index = arr.indexOf(item);\n\n    if (index > -1) {\n      return arr.splice(index, 1);\n    }\n  }\n}\n/**\n * 获取缓存组件实例\n * @param {Object} cache 缓存\n * @param {string} key 主键\n */\n\nfunction getCacheVnode(cache, key) {\n  if (typeof key === 'string' || typeof key === 'number') {\n    return getCacheVnode(cache, cache[key]);\n  }\n\n  return key;\n}\nfunction isPlainObject(obj) {\n  return _toString.call(obj) === '[object Object]';\n}\nfunction deepClone(val) {\n  if (isPlainObject(val)) {\n    var res = {};\n\n    for (var key in val) {\n      res[key] = deepClone(val[key]);\n    }\n\n    return res;\n  } else if (Array.isArray(val)) {\n    return val.slice();\n  } else {\n    return val;\n  }\n}\nfunction defineRouteMeta(routes) {\n  routes.forEach(function (route) {\n    var meta = deepClone(route.meta);\n\n    if (isPlainObject(route.meta)) {\n      Object.defineProperty(route.meta, '_default', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: meta\n      });\n    }\n\n    if (route.children) {\n      defineRouteMeta(route.children);\n    }\n  });\n}\nvar urlRegExp = /(http|ftp|https):\\/\\/[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-.,@?^=%&:/~+#]*[\\w\\-@?^=%&/~+#])?/;\n\nfunction parsePath(path) {\n  var hash = '';\n  var query = '';\n  var hashIndex = path.indexOf('#');\n\n  if (hashIndex >= 0) {\n    hash = path.slice(hashIndex);\n    path = path.slice(0, hashIndex);\n  }\n\n  var queryIndex = path.indexOf('?');\n\n  if (queryIndex >= 0) {\n    query = path.slice(queryIndex + 1);\n    path = path.slice(0, queryIndex);\n  }\n\n  return {\n    pathStr: path,\n    queryStr: query,\n    hashStr: hash\n  };\n}\n\nvar genLocation = function genLocation(url) {\n  var query = Object.create(null);\n\n  var _parsePath = parsePath(url),\n      pathStr = _parsePath.pathStr,\n      queryStr = _parsePath.queryStr,\n      hashStr = _parsePath.hashStr;\n\n  if (queryStr) {\n    queryStr.split('&').forEach(function (kv) {\n      var _kv$split = kv.split('='),\n          _kv$split2 = _slicedToArray(_kv$split, 2),\n          key = _kv$split2[0],\n          val = _kv$split2[1];\n\n      query[key] = decodeURIComponent(val);\n    });\n  }\n\n  return {\n    path: pathStr,\n    query: query,\n    hash: hashStr\n  };\n};\n\nvar stringifyPrimitive = function stringifyPrimitive(v) {\n  switch (_typeof(v)) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nvar stringifyQuery = function stringifyQuery(query) {\n  var str = '';\n  Object.keys(query).forEach(function (key, index) {\n    var val = query[key];\n\n    if (index !== 0) {\n      str += '&';\n    }\n\n    str += key + '=' + encodeURIComponent(stringifyPrimitive(val));\n  });\n  return str;\n}; // 解析url\n\n\nvar parseUrl = function parseUrl(url) {\n  if (typeof url === 'string') {\n    url = {\n      path: url,\n      query: Object.create(null)\n    };\n  } // path可能自带参数\n\n\n  var _url = url,\n      path = _url.path,\n      query = _url.query;\n  var location = genLocation(path);\n  var newQuery = Object.assign({}, location.query, query);\n  var queryStr = stringifyQuery(newQuery);\n  queryStr = queryStr ? '?' + queryStr : '';\n  return location.path + queryStr + location.hash;\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_feb_alive__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_feb_alive_ssr__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__routes__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__cache__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__navigator__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils__ = __webpack_require__(2);\n\n\n\n\n\n\nvar metaMap = Object.create(null);\nvar hasReset = false;\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  install: function install(Vue) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        router = _ref.router,\n        _ref$keyName = _ref.keyName,\n        keyName = _ref$keyName === void 0 ? 'key' : _ref$keyName,\n        _ref$isServer = _ref.isServer,\n        isServer = _ref$isServer === void 0 ? false : _ref$isServer,\n        _ref$maxPage = _ref.maxPage,\n        maxPage = _ref$maxPage === void 0 ? 10 : _ref$maxPage,\n        beforeLocationChange = _ref.beforeLocationChange;\n\n    if (isServer) {\n      Vue.component('feb-alive', Object(__WEBPACK_IMPORTED_MODULE_1__components_feb_alive_ssr__[\"a\" /* default */])());\n      return;\n    }\n\n    Vue.component('feb-alive', Object(__WEBPACK_IMPORTED_MODULE_0__components_feb_alive__[\"a\" /* default */])(keyName, maxPage));\n\n    if (!router) {\n      console.warn('need options: router');\n      return;\n    }\n\n    window.debug_metaMap = metaMap; // 缓存路由初始meta\n\n    var routes = router.options.routes;\n    Object(__WEBPACK_IMPORTED_MODULE_5__utils__[\"b\" /* defineRouteMeta */])(routes);\n    var bus = new Vue();\n    var navigator = Object(__WEBPACK_IMPORTED_MODULE_4__navigator__[\"a\" /* default */])(bus, keyName);\n    var replace = router.replace;\n    var lastKey = '';\n    var replaceFlag = false;\n\n    router.replace = function () {\n      replaceFlag = true;\n      replace.apply(this, arguments);\n    };\n\n    var ensureURL = router.history.ensureURL;\n\n    router.history.ensureURL = function () {\n      ensureURL.apply(this, arguments); // recover to.meta\n\n      var from = router.febRecord.from;\n      var to = router.febRecord.to;\n      Vue.location.recoverMeta(from, to); // do record\n\n      navigator.record(to, from, replaceFlag);\n      replaceFlag = false;\n    };\n\n    router.beforeEach(function (to, from, next) {\n      // reset to.meta\n      Object.assign(to.meta, to.meta._default);\n      router.febRecord = {\n        to: to,\n        from: from,\n        replaceFlag: replaceFlag\n      };\n      next();\n    }); // 只有客户端才有的方法\n\n    Vue.location = Vue.prototype.$location = {\n      to: function to(url) {\n        var native = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        try {\n          if (!url) {\n            console.warn('FEB-ALIVE: 跳转链接不能为空');\n            return;\n          }\n\n          url = Object(__WEBPACK_IMPORTED_MODULE_5__utils__[\"g\" /* parseUrl */])(url);\n          url = url.replace(new RegExp(\"^\".concat(location.origin)), '');\n          var matchRoute = router.match(url);\n          var matched = matchRoute.matched;\n\n          if (!matched.length || matched[0].path === '*' || native) {\n            window.location.href = url;\n            return;\n          }\n\n          if (!beforeLocationChange) {\n            router.push({\n              path: url\n            });\n            return;\n          }\n\n          beforeLocationChange(route, function (state) {\n            if (state === false) {\n              window.location.href = url;\n            } else {\n              router.push({\n                path: url\n              });\n            }\n          });\n        } catch (err) {\n          console.log(err);\n        }\n      },\n      replace: function replace(url) {\n        var native = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        try {\n          if (!url) {\n            console.warn('FEB-ALIVE: 跳转链接不能为空');\n            return;\n          }\n\n          url = Object(__WEBPACK_IMPORTED_MODULE_5__utils__[\"g\" /* parseUrl */])(url);\n          url = url.replace(new RegExp(\"^\".concat(location.origin)), '');\n          var matchRoute = router.match(url);\n          var matched = matchRoute.matched;\n\n          if (!matched.length || matched[0].path === '*' || native) {\n            window.location.replace(url);\n            return;\n          }\n\n          if (!beforeLocationChange) {\n            router.replace({\n              path: url\n            });\n            return;\n          }\n\n          beforeLocationChange(route, function (state) {\n            if (state === false) {\n              window.location.replace(url);\n            } else {\n              router.replace({\n                path: url\n              });\n            }\n          });\n        } catch (err) {\n          console.log(err);\n        }\n      },\n      go: function go(n) {\n        router.go(n);\n      },\n      back: function back() {\n        router.back();\n      },\n      forward: function forward() {\n        router.forward();\n      },\n      // 恢复缓存，确保在导航切换后执行\n      recoverMeta: function recoverMeta(from, to) {\n        var isSamePage = from.path === to.path;\n        var fromMeta = from.meta;\n        var toMeta = to.meta;\n        var key = history.state[keyName];\n        var isReplace = router.febRecord.replaceFlag; // 缓存上一页面meta配置\n\n        if (!fromMeta.disableCache && lastKey) {\n          metaMap[lastKey] = Object(__WEBPACK_IMPORTED_MODULE_5__utils__[\"a\" /* deepClone */])(fromMeta);\n        }\n\n        lastKey = key; // 匹配meta缓存\n\n        toMeta.fromCache = false;\n\n        if (!isReplace || isReplace && isSamePage) {\n          if (metaMap[key]) {\n            Object.assign(toMeta, metaMap[key]);\n            toMeta.fromCache = true;\n          }\n        }\n\n        return toMeta;\n      },\n      getRoutes: function getRoutes() {\n        return __WEBPACK_IMPORTED_MODULE_2__routes__[\"a\" /* default */].slice();\n      },\n      getCache: function getCache() {\n        return __WEBPACK_IMPORTED_MODULE_3__cache__[\"a\" /* default */];\n      },\n      getKey: function getKey() {\n        return history.state && history.state[keyName];\n      },\n      cleanRoutes: function cleanRoutes() {\n        return navigator.reset();\n      },\n      on: function on(event, callback) {\n        bus.$on(event, callback);\n      },\n      once: function once(event, callback) {\n        bus.$once(event, callback);\n      },\n      off: function off(event, callback) {\n        bus.$off(event, callback);\n      }\n    };\n  },\n  resetHistory: function resetHistory() {\n    if (typeof history !== 'undefined' && !hasReset) {\n      var nativeHistoryReplaceState = history.replaceState.bind(history);\n\n      history.replaceState = function (state, title, path) {\n        nativeHistoryReplaceState(Object.assign({}, history.state, state), title, path);\n      };\n\n      hasReset = true;\n    }\n  }\n});\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__routes__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cache__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils__ = __webpack_require__(2);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (keyName, maxPage) {\n  return {\n    name: 'feb-alive',\n    abstract: true,\n    methods: {\n      cacheClear: function cacheClear() {\n        // 判断index 删除老的\n        if (maxPage && this.keys.length > parseInt(maxPage)) {\n          var oldKey = this.keys[0];\n          var oldVnode = this.cache[oldKey];\n          oldVnode && oldVnode.componentInstance && oldVnode.componentInstance.$destroy();\n          Object(__WEBPACK_IMPORTED_MODULE_2__utils__[\"h\" /* remove */])(this.keys, oldKey);\n          delete this.cache[oldKey];\n        }\n\n        for (var key in this.cache) {\n          if (!Object(__WEBPACK_IMPORTED_MODULE_2__utils__[\"f\" /* matches */])(__WEBPACK_IMPORTED_MODULE_0__routes__[\"a\" /* default */], key)) {\n            var vnode = this.cache[key];\n            vnode && vnode.componentInstance && vnode.componentInstance.$destroy();\n            Object(__WEBPACK_IMPORTED_MODULE_2__utils__[\"h\" /* remove */])(this.keys, key);\n            delete this.cache[key];\n          }\n        }\n      }\n    },\n    created: function created() {\n      this.cache = Object.create(null);\n      this.keys = [];\n    },\n    // 当路由变化时候，会触发feb-alive的$fourceUpdate\n    render: function render() {\n      // 取到router-view的vnode\n      var vnode = this.$slots.default ? this.$slots.default[0] : null;\n      var disableCache = this.$route.meta.disableCache; // 如果不支持html5 history 写操作则不做缓存处理\n\n      if (!__WEBPACK_IMPORTED_MODULE_2__utils__[\"i\" /* supportHistoryState */]) {\n        return vnode;\n      } // 尝试写入key\n\n\n      if (!history.state || !history.state[keyName]) {\n        var state = _defineProperty({}, keyName, Object(__WEBPACK_IMPORTED_MODULE_2__utils__[\"c\" /* genKey */])());\n\n        var path = Object(__WEBPACK_IMPORTED_MODULE_2__utils__[\"e\" /* getLocation */])();\n        history.replaceState(state, null, path);\n      } // 有些浏览器不支持往state中写入数据\n\n\n      if (!history.state) {\n        return vnode;\n      } // 指定不使用缓存\n\n\n      if (disableCache) {\n        return vnode;\n      } // 核心逻辑\n\n\n      if (vnode) {\n        var cache = this.cache,\n            keys = this.keys;\n        var key = history.state[keyName];\n        var _this$$router$febReco = this.$router.febRecord,\n            from = _this$$router$febReco.from,\n            to = _this$$router$febReco.to;\n        var parent = this.$parent;\n        var depth = 0;\n        var cacheVnode = Object.create(null);\n        vnode && (vnode.data.febAlive = true);\n\n        while (parent && parent._routerRoot !== parent) {\n          if (parent.$vnode && parent.$vnode.data.febAlive) {\n            depth++;\n          }\n\n          parent = parent.$parent;\n        } // 记录缓存及其所在层级\n\n\n        __WEBPACK_IMPORTED_MODULE_1__cache__[\"a\" /* default */][depth] = cache; // /home/a backTo /other\n        // 内层feb-alive实例会被保存，防止从/home/a 跳转到 /other的时候内层feb-alive执行render时候，多生成一个实例\n\n        if (to.matched.length < depth + 1) {\n          return null;\n        }\n\n        if (from.matched[depth] === to.matched[depth] && from.matched.slice(-1)[0] !== to.matched.slice(-1)[0]) {\n          // 嵌套路由跳转 && 父级路由\n          // /home/a --> /home/b\n          // 父路由通过key进行复用\n          cache[key] = cache[key] || this.keys[this.keys.length - 1];\n          cacheVnode = Object(__WEBPACK_IMPORTED_MODULE_2__utils__[\"d\" /* getCacheVnode */])(cache, cache[key]);\n\n          if (cacheVnode) {\n            vnode.key = cacheVnode.key;\n            Object(__WEBPACK_IMPORTED_MODULE_2__utils__[\"h\" /* remove */])(keys, key);\n            keys.push(key);\n          } else {\n            this.cacheClear();\n            cache[key] = vnode;\n            keys.push(key);\n          }\n        } else {\n          // 嵌套路由跳转 && 子路由\n          // 正常跳转 && 动态路由跳转\n          // /a --> /b\n          // /page/1 --> /page/2\n          vnode.key = \"__febAlive-\".concat(key, \"-\").concat(vnode.tag);\n          cacheVnode = Object(__WEBPACK_IMPORTED_MODULE_2__utils__[\"d\" /* getCacheVnode */])(cache, key); // 只有相同的vnode才允许复用组件实例，否则虽然实例复用了，但是在patch的最后阶段，会将复用的dom删除\n\n          if (cacheVnode && vnode.tag === cacheVnode.tag) {\n            // 从普通路由后退到嵌套路由时，才需要复原key\n            vnode.key = cacheVnode.key;\n            vnode.componentInstance = cacheVnode.componentInstance;\n            Object(__WEBPACK_IMPORTED_MODULE_2__utils__[\"h\" /* remove */])(keys, key);\n            keys.push(key);\n          } else {\n            this.cacheClear();\n            cache[key] = vnode;\n            keys.push(key);\n          }\n        }\n\n        vnode.data.keepAlive = true;\n      }\n\n      return vnode;\n    },\n    destroyed: function destroyed() {\n      for (var key in this.cache) {\n        var vnode = this.cache[key];\n        vnode && vnode.componentInstance.$destroy();\n      }\n\n      this.keys = [];\n      this.cache = {};\n    }\n  };\n});\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (function () {\n  return {\n    name: 'feb-alive',\n    abstract: true,\n    render: function render() {\n      var vnode = this.$slots.default ? this.$slots.default[0] : null;\n      return vnode;\n    }\n  };\n});\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__routes__ = __webpack_require__(0);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (bus, keyName) {\n  var forward = function forward(name, toRoute, fromRoute) {\n    var to = {\n      route: toRoute\n    };\n    var from = {\n      route: fromRoute\n    };\n    var routes = __WEBPACK_IMPORTED_MODULE_0__routes__[\"a\" /* default */];\n    from.name = routes[routes.length - 1] || null;\n    to.name = name;\n    routes.push(name);\n    bus.$emit('forward', to, from);\n  };\n\n  var back = function back(count, toRoute, fromRoute) {\n    var to = {\n      route: toRoute\n    };\n    var from = {\n      route: fromRoute\n    };\n    var routes = __WEBPACK_IMPORTED_MODULE_0__routes__[\"a\" /* default */];\n    from.name = routes[routes.length - 1];\n    to.name = routes[routes.length - 1 - count];\n    routes.splice(__WEBPACK_IMPORTED_MODULE_0__routes__[\"a\" /* default */].length - count, count);\n    bus.$emit('back', to, from);\n  };\n\n  var replace = function replace(name, toRoute, fromRoute) {\n    var to = {\n      route: toRoute\n    };\n    var from = {\n      route: fromRoute\n    };\n    var routes = __WEBPACK_IMPORTED_MODULE_0__routes__[\"a\" /* default */];\n    from.name = routes[routes.length - 1] || null;\n    to.name = name;\n    routes.splice(__WEBPACK_IMPORTED_MODULE_0__routes__[\"a\" /* default */].length - 1, 1, name);\n    bus.$emit('replace', to, from);\n  };\n\n  var refresh = function refresh(toRoute, fromRoute) {\n    var to = {\n      route: toRoute\n    };\n    var from = {\n      route: fromRoute\n    };\n    var routes = __WEBPACK_IMPORTED_MODULE_0__routes__[\"a\" /* default */];\n    to.name = from.name = routes[routes.length - 1];\n    bus.$emit('refresh', to, from);\n  };\n\n  var reset = function reset() {\n    __WEBPACK_IMPORTED_MODULE_0__routes__[\"a\" /* default */].splice(0, __WEBPACK_IMPORTED_MODULE_0__routes__[\"a\" /* default */].length);\n    bus.$emit('reset');\n  };\n\n  var record = function record(toRoute, fromRoute, replaceFlag) {\n    if (!history.state) {\n      return;\n    }\n\n    var name = history.state[keyName];\n\n    if (!name) {\n      return;\n    }\n\n    if (replaceFlag) {\n      replace(name, toRoute, fromRoute);\n    } else {\n      var toIndex = __WEBPACK_IMPORTED_MODULE_0__routes__[\"a\" /* default */].lastIndexOf(name);\n\n      if (toIndex === -1) {\n        forward(name, toRoute, fromRoute);\n      } else if (toIndex === __WEBPACK_IMPORTED_MODULE_0__routes__[\"a\" /* default */].length - 1) {\n        refresh(toRoute, fromRoute);\n      } else {\n        back(__WEBPACK_IMPORTED_MODULE_0__routes__[\"a\" /* default */].length - 1 - toIndex, toRoute, fromRoute);\n      }\n    }\n  };\n\n  return {\n    record: record,\n    reset: reset\n  };\n});\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// feb-alive.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 166d148b945331fde3c8","/**\n * 记录浏览历史\n */\n\nconst inBrowser = typeof window !== 'undefined'\nlet routes = []\nif (inBrowser) {\n  window.debug_routes = routes\n}\nexport default routes\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes.js","/**\n * 记录feb-alive中的缓存列表\n */\n\nconst inBrowser = typeof window !== 'undefined'\nlet cache = Object.create(null)\nif (inBrowser) {\n  window.debug_cache = cache\n}\nexport default cache\n\n\n\n// WEBPACK FOOTER //\n// ./src/cache.js","const inBrowser = typeof window !== 'undefined'\nconst _toString = Object.prototype.toString\n\n// 判断是否支持HTML5 history\nexport const supportsPushState = inBrowser && (function () {\n  var ua = window.navigator.userAgent\n\n  if (\n    (ua.indexOf('Android 2.') !== -1 || ua.indexOf('Android 4.0') !== -1) &&\n    ua.indexOf('Mobile Safari') !== -1 &&\n    ua.indexOf('Chrome') === -1 &&\n    ua.indexOf('Windows Phone') === -1\n  ) {\n    return false\n  }\n\n  return window.history && 'pushState' in window.history\n})()\n\nexport const supportHistoryState = (function () {\n  if (!supportsPushState) {\n    return false\n  }\n  // 测试写操作\n  history.replaceState(Object.assign({ _debug: 'ok' }, history.state), null)\n  if (!history.state) {\n    return false\n  } else {\n    let originState = Object.assign({}, history.state)\n    delete originState._debug\n    history.replaceState(originState, null)\n    return true\n  }\n})()\n\n/**\n * 生成页面主键\n */\nexport function genKey () {\n  const t = 'xxxxxxxx'\n  return t.replace(/[xy]/g, function (c) {\n    const r = Math.random() * 16 | 0\n    const v = c === 'x'\n      ? r\n      : (r & 0x3 | 0x8)\n    return v.toString(16)\n  })\n}\n\n/**\n * 检测路由匹配\n * @param {Array/String/RegExp} pattern 路由主键数组/字符串/正则表达式\n * @param {String} name 路由主键\n */\nexport function matches (pattern, name) {\n  if (Array.isArray(pattern)) {\n    return pattern.indexOf(name) > -1\n  } else if (typeof pattern === 'string') {\n    return pattern.split(',').indexOf(name) > -1\n  } else if (pattern instanceof RegExp) {\n    return pattern.test(name)\n  }\n  return false\n}\n\n/**\n * 获取当前url路径\n * @param {String} base | 基础路径\n * @param {String} mode | 路由模式\n */\nexport function getLocation (base, mode) {\n  var path = window.location.pathname\n  if (mode === 'hash') {\n    return window.location.hash.replace(/^#\\//, '')\n  }\n  if (base && path.indexOf(base) === 0) {\n    path = path.slice(base.length)\n  }\n  return (path || '/') + window.location.search + window.location.hash\n}\n\n/**\n * 删除数组中匹配元素\n * @param {Array} arr 数组\n * @param {String} item 需要删除的元素\n */\nexport function remove (arr, item) {\n  if (arr.length) {\n    const index = arr.indexOf(item)\n    if (index > -1) {\n      return arr.splice(index, 1)\n    }\n  }\n}\n\n/**\n * 获取缓存组件实例\n * @param {Object} cache 缓存\n * @param {string} key 主键\n */\nexport function getCacheVnode (cache, key) {\n  if (typeof key === 'string' || typeof key === 'number') {\n    return getCacheVnode(cache, cache[key])\n  }\n  return key\n}\n\nexport function isPlainObject (obj) {\n  return _toString.call(obj) === '[object Object]'\n}\n\nexport function deepClone (val) {\n  if (isPlainObject(val)) {\n    const res = {}\n    for (const key in val) {\n      res[key] = deepClone(val[key])\n    }\n    return res\n  } else if (Array.isArray(val)) {\n    return val.slice()\n  } else {\n    return val\n  }\n}\n\nexport function defineRouteMeta (routes) {\n  routes.forEach(route => {\n    const meta = deepClone(route.meta)\n    if (isPlainObject(route.meta)) {\n      Object.defineProperty(route.meta, '_default', {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: meta\n      })\n    }\n    if (route.children) {\n      defineRouteMeta(route.children)\n    }\n  })\n}\n\nexport const urlRegExp = /(http|ftp|https):\\/\\/[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-.,@?^=%&:/~+#]*[\\w\\-@?^=%&/~+#])?/\n\nfunction parsePath (path) {\n  let hash = ''\n  let query = ''\n\n  const hashIndex = path.indexOf('#')\n  if (hashIndex >= 0) {\n    hash = path.slice(hashIndex)\n    path = path.slice(0, hashIndex)\n  }\n\n  const queryIndex = path.indexOf('?')\n  if (queryIndex >= 0) {\n    query = path.slice(queryIndex + 1)\n    path = path.slice(0, queryIndex)\n  }\n\n  return {\n    pathStr: path,\n    queryStr: query,\n    hashStr: hash\n  }\n}\n\nconst genLocation = function (url) {\n  const query = Object.create(null)\n  const { pathStr, queryStr, hashStr } = parsePath(url)\n  if (queryStr) {\n    queryStr.split('&').forEach(kv => {\n      const [key, val] = kv.split('=')\n      query[key] = decodeURIComponent(val)\n    })\n  }\n  return {\n    path: pathStr,\n    query,\n    hash: hashStr\n  }\n}\n\nconst stringifyPrimitive = function (v) {\n  switch (typeof v) {\n    case 'string':\n      return v\n    case 'boolean':\n      return v ? 'true' : 'false'\n    case 'number':\n      return isFinite(v) ? v : ''\n    default:\n      return ''\n  }\n}\n\nconst stringifyQuery = function (query) {\n  let str = ''\n  Object.keys(query).forEach((key, index) => {\n    const val = query[key]\n    if (index !== 0) {\n      str += '&'\n    }\n    str += key + '=' + encodeURIComponent(stringifyPrimitive(val))\n  })\n  return str\n}\n\n// 解析url\nexport const parseUrl = function (url) {\n  if (typeof url === 'string') {\n    url = {\n      path: url,\n      query: Object.create(null)\n    }\n  }\n  // path可能自带参数\n  const { path, query } = url\n  const location = genLocation(path)\n  const newQuery = Object.assign({}, location.query, query)\n  let queryStr = stringifyQuery(newQuery)\n  queryStr = queryStr ? '?' + queryStr : ''\n  return location.path + queryStr + location.hash\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","import FebAlive from './components/feb-alive'\nimport FebAliveSSR from './components/feb-alive-ssr'\nimport febRoutes from './routes'\nimport febCache from './cache'\nimport nav from './navigator'\nimport { defineRouteMeta, deepClone, parseUrl } from './utils'\n\nconst metaMap = Object.create(null)\nlet hasReset = false\n\nexport default {\n  install: (Vue, { router, keyName = 'key', isServer = false, maxPage = 10, beforeLocationChange } = {}) => {\n    if (isServer) {\n      Vue.component('feb-alive', FebAliveSSR())\n      return\n    }\n\n    Vue.component('feb-alive', FebAlive(keyName, maxPage))\n\n    if (!router) {\n      console.warn('need options: router')\n      return\n    }\n\n    window.debug_metaMap = metaMap\n\n    // 缓存路由初始meta\n    const routes = router.options.routes\n\n    defineRouteMeta(routes)\n\n    const bus = new Vue()\n    const navigator = nav(bus, keyName)\n    const replace = router.replace\n    let lastKey = ''\n    let replaceFlag = false\n\n    router.replace = function () {\n      replaceFlag = true\n      replace.apply(this, arguments)\n    }\n\n    const ensureURL = router.history.ensureURL\n    router.history.ensureURL = function () {\n      ensureURL.apply(this, arguments)\n      // recover to.meta\n      const from = router.febRecord.from\n      const to = router.febRecord.to\n      Vue.location.recoverMeta(from, to)\n      // do record\n      navigator.record(to, from, replaceFlag)\n      replaceFlag = false\n    }\n\n    router.beforeEach((to, from, next) => {\n      // reset to.meta\n      Object.assign(to.meta, to.meta._default)\n      router.febRecord = {\n        to,\n        from,\n        replaceFlag\n      }\n      next()\n    })\n\n    // 只有客户端才有的方法\n    Vue.location = Vue.prototype.$location = {\n      to: (url, native = false) => {\n        try {\n          if (!url) {\n            console.warn('FEB-ALIVE: 跳转链接不能为空')\n            return\n          }\n\n          url = parseUrl(url)\n\n          url = url.replace(new RegExp(`^${location.origin}`), '')\n          const matchRoute = router.match(url)\n          const matched = matchRoute.matched\n          if (!matched.length || matched[0].path === '*' || native) {\n            window.location.href = url\n            return\n          }\n          if (!beforeLocationChange) {\n            router.push({ path: url })\n            return\n          }\n          beforeLocationChange(route, (state) => {\n            if (state === false) {\n              window.location.href = url\n            } else {\n              router.push({ path: url })\n            }\n          })\n        } catch (err) {\n          console.log(err)\n        }\n      },\n      replace: (url, native = false) => {\n        try {\n          if (!url) {\n            console.warn('FEB-ALIVE: 跳转链接不能为空')\n            return\n          }\n\n          url = parseUrl(url)\n\n          url = url.replace(new RegExp(`^${location.origin}`), '')\n          const matchRoute = router.match(url)\n          const matched = matchRoute.matched\n          if (!matched.length || matched[0].path === '*' || native) {\n            window.location.replace(url)\n            return\n          }\n          if (!beforeLocationChange) {\n            router.replace({ path: url })\n            return\n          }\n          beforeLocationChange(route, (state) => {\n            if (state === false) {\n              window.location.replace(url)\n            } else {\n              router.replace({ path: url })\n            }\n          })\n        } catch (err) {\n          console.log(err)\n        }\n      },\n      go (n) {\n        router.go(n)\n      },\n      back () {\n        router.back()\n      },\n      forward () {\n        router.forward()\n      },\n      // 恢复缓存，确保在导航切换后执行\n      recoverMeta (from, to) {\n        const isSamePage = from.path === to.path\n        const fromMeta = from.meta\n        const toMeta = to.meta\n        const key = history.state[keyName]\n        const isReplace = router.febRecord.replaceFlag\n        // 缓存上一页面meta配置\n        if (!fromMeta.disableCache && lastKey) {\n          metaMap[lastKey] = deepClone(fromMeta)\n        }\n        lastKey = key\n        // 匹配meta缓存\n        toMeta.fromCache = false\n        if (!isReplace || (isReplace && isSamePage)) {\n          if (metaMap[key]) {\n            Object.assign(toMeta, metaMap[key])\n            toMeta.fromCache = true\n\n          }\n        }\n        return toMeta\n      },\n      getRoutes: () => febRoutes.slice(),\n      getCache: () => febCache,\n      getKey: () => {\n        return history.state && history.state[keyName]\n      },\n      cleanRoutes: () => navigator.reset(),\n      on: (event, callback) => {\n        bus.$on(event, callback)\n      },\n      once: (event, callback) => {\n        bus.$once(event, callback)\n      },\n      off: (event, callback) => {\n        bus.$off(event, callback)\n      }\n    }\n  },\n  resetHistory () {\n    if (typeof history !== 'undefined' && !hasReset) {\n      const nativeHistoryReplaceState = history.replaceState.bind(history)\n      history.replaceState = function (state, title, path) {\n        nativeHistoryReplaceState(Object.assign({}, history.state, state), title, path)\n      }\n      hasReset = true\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import febRoutes from '../routes'\nimport febCache from '../cache'\nimport { genKey, supportHistoryState, matches, getLocation, getCacheVnode, remove } from '../utils'\n\nexport default (keyName, maxPage) => {\n  return {\n    name: 'feb-alive',\n    abstract: true,\n    methods: {\n      cacheClear () {\n        // 判断index 删除老的\n        if (maxPage && this.keys.length > parseInt(maxPage)) {\n          const oldKey = this.keys[0]\n          const oldVnode = this.cache[oldKey]\n          oldVnode && oldVnode.componentInstance && oldVnode.componentInstance.$destroy()\n          remove(this.keys, oldKey)\n          delete this.cache[oldKey]\n        }\n\n        for (const key in this.cache) {\n          if (!matches(febRoutes, key)) {\n            const vnode = this.cache[key]\n            vnode && vnode.componentInstance && vnode.componentInstance.$destroy()\n            remove(this.keys, key)\n            delete this.cache[key]\n          }\n        }\n      }\n    },\n    created () {\n      this.cache = Object.create(null)\n      this.keys = []\n    },\n    // 当路由变化时候，会触发feb-alive的$fourceUpdate\n    render () {\n      // 取到router-view的vnode\n      const vnode = this.$slots.default ? this.$slots.default[0] : null\n      const disableCache = this.$route.meta.disableCache\n      // 如果不支持html5 history 写操作则不做缓存处理\n      if (!supportHistoryState) {\n        return vnode\n      }\n      // 尝试写入key\n      if (!history.state || !history.state[keyName]) {\n        const state = {\n          [keyName]: genKey()\n        }\n        const path = getLocation()\n        history.replaceState(state, null, path)\n      }\n      // 有些浏览器不支持往state中写入数据\n      if (!history.state) {\n        return vnode\n      }\n      // 指定不使用缓存\n      if (disableCache) {\n        return vnode\n      }\n      // 核心逻辑\n      if (vnode) {\n        const { cache, keys } = this\n        const key = history.state[keyName]\n        const { from, to } = this.$router.febRecord\n        let parent = this.$parent\n        let depth = 0\n        let cacheVnode = Object.create(null)\n        vnode && (vnode.data.febAlive = true)\n        while (parent && parent._routerRoot !== parent) {\n          if (parent.$vnode && parent.$vnode.data.febAlive) {\n            depth++\n          }\n          parent = parent.$parent\n        }\n\n        // 记录缓存及其所在层级\n        febCache[depth] = cache\n\n        // /home/a backTo /other\n        // 内层feb-alive实例会被保存，防止从/home/a 跳转到 /other的时候内层feb-alive执行render时候，多生成一个实例\n        if (to.matched.length < depth + 1) {\n          return null\n        }\n        if (from.matched[depth] === to.matched[depth] && (from.matched.slice(-1)[0] !== to.matched.slice(-1)[0])) {\n          // 嵌套路由跳转 && 父级路由\n          // /home/a --> /home/b\n          // 父路由通过key进行复用\n          cache[key] = cache[key] || this.keys[this.keys.length - 1]\n          cacheVnode = getCacheVnode(cache, cache[key])\n          if (cacheVnode) {\n            vnode.key = cacheVnode.key\n            remove(keys, key)\n            keys.push(key)\n          } else {\n            this.cacheClear()\n            cache[key] = vnode\n            keys.push(key)\n          }\n        } else {\n          // 嵌套路由跳转 && 子路由\n          // 正常跳转 && 动态路由跳转\n          // /a --> /b\n          // /page/1 --> /page/2\n          vnode.key = `__febAlive-${key}-${vnode.tag}`\n          cacheVnode = getCacheVnode(cache, key)\n          // 只有相同的vnode才允许复用组件实例，否则虽然实例复用了，但是在patch的最后阶段，会将复用的dom删除\n          if (cacheVnode && vnode.tag === cacheVnode.tag) {\n            // 从普通路由后退到嵌套路由时，才需要复原key\n            vnode.key = cacheVnode.key\n            vnode.componentInstance = cacheVnode.componentInstance\n            remove(keys, key)\n            keys.push(key)\n          } else {\n            this.cacheClear()\n            cache[key] = vnode\n            keys.push(key)\n          }\n        }\n        vnode.data.keepAlive = true\n      }\n      return vnode\n    },\n    destroyed () {\n      for (const key in this.cache) {\n        const vnode = this.cache[key]\n        vnode && vnode.componentInstance.$destroy()\n      }\n      this.keys = []\n      this.cache = {}\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/feb-alive.js","export default () => {\n  return {\n    name: 'feb-alive',\n    abstract: true,\n    render () {\n      const vnode = this.$slots.default ? this.$slots.default[0] : null\n      return vnode\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/feb-alive-ssr.js","import Routes from './routes'\n\nexport default (bus, keyName) => {\n  const forward = (name, toRoute, fromRoute) => {\n    const to = { route: toRoute }\n    const from = { route: fromRoute }\n    const routes = Routes\n    from.name = routes[routes.length - 1] || null\n    to.name = name\n    routes.push(name)\n    bus.$emit('forward', to, from)\n  }\n  const back = (count, toRoute, fromRoute) => {\n    const to = { route: toRoute }\n    const from = { route: fromRoute }\n    const routes = Routes\n    from.name = routes[routes.length - 1]\n    to.name = routes[routes.length - 1 - count]\n    routes.splice(Routes.length - count, count)\n    bus.$emit('back', to, from)\n  }\n  const replace = (name, toRoute, fromRoute) => {\n    const to = { route: toRoute }\n    const from = { route: fromRoute }\n    const routes = Routes\n    from.name = routes[routes.length - 1] || null\n    to.name = name\n    routes.splice(Routes.length - 1, 1, name)\n    bus.$emit('replace', to, from)\n  }\n  const refresh = (toRoute, fromRoute) => {\n    const to = { route: toRoute }\n    const from = { route: fromRoute }\n    const routes = Routes\n    to.name = from.name = routes[routes.length - 1]\n    bus.$emit('refresh', to, from)\n  }\n  const reset = () => {\n    Routes.splice(0, Routes.length)\n    bus.$emit('reset')\n  }\n\n  const record = (toRoute, fromRoute, replaceFlag) => {\n    if (!history.state) {\n      return\n    }\n    const name = history.state[keyName]\n    if (!name) {\n      return\n    }\n    if (replaceFlag) {\n      replace(name, toRoute, fromRoute)\n    } else {\n      const toIndex = Routes.lastIndexOf(name)\n      if (toIndex === -1) {\n        forward(name, toRoute, fromRoute)\n      } else if (toIndex === Routes.length - 1) {\n        refresh(toRoute, fromRoute)\n      } else {\n        back(Routes.length - 1 - toIndex, toRoute, fromRoute)\n      }\n    }\n  }\n\n  return {\n    record, reset\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/navigator.js"],"sourceRoot":""}